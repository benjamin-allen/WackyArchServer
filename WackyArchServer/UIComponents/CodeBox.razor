@inject IJSRuntime JS

<div id="ace-editor"></div>
<div class="codebox-info" >
    <p>@infoMessage</p>
</div>


@code {
    [Parameter]
    public int rows { get; set; } = 30;
    [Parameter]
    public int cols { get; set; } = 18;
    private int minRows { get; set; } = 4;
    private int minCols { get; set; } = 18;

    [Parameter, EditorRequired]
    public CPU Cpu { get; set; }

    public string CodeText { get; set; }

    private string infoMessage { get; set; }

    protected override void OnInitialized()
    {
        rows = Math.Min(rows, minRows);
        cols = Math.Min(cols, minCols);
    }

    #region CodeMirrorInterop
    private IJSObjectReference module { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            module = await JS.InvokeAsync<IJSObjectReference>("import", "./UIComponents/CodeBox.razor.js");
            await module.InvokeAsync<string>("setup");
        }
    }
    #endregion

    public void UpdateLinePointer(int line, bool isError)
    {
        Console.WriteLine($"Highlight line {line}, isError: {isError}");
    }

    public void SetInfoMessage(string infoMessage)
    {
        this.infoMessage = infoMessage;
    }
}
